(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a720859c"],{2917:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Form",{staticClass:"form_container",style:t.converterCardStyles,attrs:{"label-width":80}},[a("transition",{attrs:{name:"fade"}},["http"===t.type?a("FormItem",{key:"http",attrs:{label:t.$t("address")}},[a("Input",{attrs:{placeholder:t.$t("address-placeholder")},model:{value:t.formData.path,callback:function(e){t.$set(t.formData,"path",e)},expression:"formData.path"}})],1):a("FormItem",{key:"local",attrs:{label:t.$t("choose")}},[a("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"flex-end"}},[a("Upload",{staticStyle:{width:"200px",height:"200px"},style:t.resultStyles,attrs:{accept:t.accept,"need-preview":!0,format:t.formData.accept.split(";")},on:{change:t.changeFile}}),t.formData.file?a("span",{staticStyle:{"margin-left":"10px","line-height":"1","font-family":"Consolas,Menlo,Courier,monospace"},domProps:{textContent:t._s(t.imageOriginSize.width+"x"+t.imageOriginSize.height)}}):t._e()],1)])],1),"http"===t.type&&t.formData.path&&t.formData.path.trim()?a("transition",{attrs:{name:"fade","label-wdith":80}},[a("FormItem",{attrs:{"label-width":80}},[a("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"flex-end"}},[a("div",{staticClass:"image_previewer",staticStyle:{display:"inline-flex"}},[a("img",{attrs:{src:t.formData.path,alt:t.$t("picture-error")},on:{load:t.imageLoaded,error:t.imageLoadError}})]),t.imageIsReady?a("span",{staticStyle:{"margin-left":"10px","line-height":"1","font-family":"Consolas,Menlo,Courier,monospace"},domProps:{textContent:t._s(t.imageOriginSize.width+"x"+t.imageOriginSize.height)}}):t._e()])])],1):t._e(),a("FormItem",{attrs:{label:t.$t("type")}},[a("Select",{attrs:{filterable:""},model:{value:t.formData.imageType,callback:function(e){t.$set(t.formData,"imageType",e)},expression:"formData.imageType"}},t._l(t.allImageTypes,(function(t,e){return a("Option",{key:t.label,attrs:{value:t.label,label:t.label}})})),1)],1),a("FormItem",{attrs:{label:t.$t("size")}},[a("Select",{staticStyle:{width:"150px",float:"left"},on:{"on-change":t.changeImageSize},model:{value:t.formData.imageSize,callback:function(e){t.$set(t.formData,"imageSize",e)},expression:"formData.imageSize"}},t._l(t.allSize,(function(t,e){return a("Option",{key:t.label,attrs:{value:t.value,label:t.label}})})),1),a("div",{staticStyle:{float:"left","margin-left":"10px",display:"inline-flex","flex-direction":"row","align-items":"center","justify-content":"flex-start"}},[a("transition",{attrs:{name:"fade"}},[-1==t.formData.imageSize?a("Input",{staticStyle:{width:"120px"},attrs:{number:!0},on:{"on-change":t.changeWidth},model:{value:t.formData.width,callback:function(e){t.$set(t.formData,"width",e)},expression:"formData.width"}},[a("span",{attrs:{slot:"prepend"},domProps:{textContent:t._s(t.$t("width"))},slot:"prepend"})]):t._e()],1),a("transition",{attrs:{name:"fade"}},[-1==t.formData.imageSize?a("Tooltip",{staticStyle:{width:"32px",height:"32px","margin-left":"10px"},attrs:{content:t.$t("lock"),placement:"top"}},[a("div",{staticClass:"size_lock",on:{click:t.toggleLockSize}},[a("svg",[a("use",{attrs:{"xlink:href":"#"+(t.lockSize?"icon-lock":"icon-unlock")}})])])]):t._e()],1),a("transition",{attrs:{name:"fade"}},[-1==t.formData.imageSize?a("Input",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{number:!0},on:{"on-change":t.changeHeight},model:{value:t.formData.height,callback:function(e){t.$set(t.formData,"height",e)},expression:"formData.height"}},[a("span",{attrs:{slot:"prepend"},domProps:{textContent:t._s(t.$t("height"))},slot:"prepend"})]):t._e()],1)],1)],1),a("FormItem",{attrs:{"label-width":80}},[a("Button",{attrs:{type:"primary",disabled:!t.imageIsReady&&!t.formData.file},domProps:{textContent:t._s(t.$t("convert"))},on:{click:t.doConvert}})],1),a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"converter_result"},[a("div",{staticClass:"converter_result_header"},[a("div",{staticClass:"converter_result_header_bg",style:t.resultStyles}),a("div",{staticClass:"converter_result_header_content",style:t.converterCardStyles,domProps:{textContent:t._s(t.$t("output"))}})]),200===t.convertResponse.status&&t.convertResponse.data.path&&t.convertResponse.data.path.trim()?a("div",{staticClass:"converter_result_content"},[a("div",{staticClass:"converter_result_content_img"},[a("img",{attrs:{src:t.convertResponse.data.path,alt:"预览失败"}})]),a("Button",{staticStyle:{"margin-top":"15px"},attrs:{type:"success"},domProps:{textContent:t._s(t.$t("download"))},on:{click:function(e){return t.$downloadImage(t.convertResponse.data.path)}}})],1):a("div",{staticClass:"converter_result_error"},[t._v(" "+t._s(t.convertResponse.message)+" ")])])])],1)},r=[],o=(a("a630"),a("a15b"),a("d81d"),a("a9e3"),a("d3b7"),a("6062"),a("3ca3"),a("498a"),a("ddb0"),a("96cf"),a("1da1")),n=a("5530"),s=a("5867"),l=a("4dc6"),c=a("5f81"),h=a("beb5"),d=a("96c4"),m=a("8d8f"),p=a("e3f5"),u=a("2f62"),g=Object(u["a"])("../../../store/modules"),f=g.mapActions,v={name:"ConverterHttpImage",components:{Upload:function(){return a.e("chunk-18c21991").then(a.bind(null,"c7f0"))},Button:p["a"],Form:m["a"],FormItem:d["a"],Input:h["a"],Select:c["a"],Option:l["a"],Tooltip:s["a"]},props:{type:{type:String,default:"http"},allImageTypes:{type:Array,default:function(){return[]}},allSize:{type:Array,default:function(){return[]}}},data:function(){return{lockSize:!0,convertResponse:{},imageOriginSize:{width:0,height:0},formData:{path:"",accept:"",file:null,imageType:"png",width:0,height:0,imageSize:-2},imageIsReady:!1}},computed:{bgType:function(){return this.$store.state.bgType},bg:function(){return this.$store.state.bg},language:function(){return this.$store.state.language},converterCardStyles:function(){return"image"!=this.bgType&&this.bg?{backgroundColor:this.$lightenOrDarken(this.bg,-10)}:{backgroundColor:"#fff"}},resultStyles:function(){return"image"!=this.bgType&&this.bg?{backgroundColor:this.$lightenOrDarken(this.bg,-20)}:{backgroundColor:"#fff"}},accept:function(){return Array.from(new Set(this.allImageTypes.map((function(t){return t.value})))).join(",")}},mounted:function(){this.formData.accept=this.allImageTypes.map((function(t){return t.label})).join(";")},methods:Object(n["a"])(Object(n["a"])({},f(["moduleConverter"])),{},{changeImageSize:function(t){if(-2===Number(t))this.formData.width=this.imageOriginSize.width,this.formData.height=this.imageOriginSize.height;else if(-1===Number(t));else{var e=this.allSize[Number(t)+2];this.formData.width=e.size,this.formData.height=e.size}},toggleLockSize:function(){this.lockSize=!this.lockSize},changeWidth:function(){this.lockSize&&(this.formData.height=Math.floor(Number(this.formData.width)*Number(this.imageOriginSize.height)/Number(this.imageOriginSize.width)))},changeHeight:function(){this.lockSize&&(this.formData.width=Math.floor(Number(this.formData.height)*Number(this.imageOriginSize.width)/Number(this.imageOriginSize.height)))},doConvert:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("http"!==t.type){e.next=7;break}return e.next=3,t.$store.dispatch("moduleConverter/doConvertFromHttp",t.formData);case 3:a=e.sent,200==a.status&&a.data?t.convertResponse=a.data:t.convertResponse={status:1001,message:"失败",data:null},e.next=11;break;case 7:return e.next=9,t.$store.dispatch("moduleConverter/doConvertFromLocal",t.formData);case 9:a=e.sent,200==a.status&&a.data?t.convertResponse=a.data:t.convertResponse={status:1001,message:"失败",data:null};case 11:case"end":return e.stop()}}),e)})))()},imageLoaded:function(t){this.imageOriginSize={width:t.target.naturalWidth,height:t.target.naturalHeight},this.formData.width=this.imageOriginSize.width,this.formData.height=this.imageOriginSize.height,this.imageIsReady=!0},imageLoadError:function(t){this.imageIsReady=!1,this.imageOriginSize={width:0,height:0}},changeFile:function(t){var e=this;this.formData.file=t.file;var a=new Image;a.onload=function(){e.imageOriginSize={width:a.width,height:a.height},e.formData.width=a.width,e.formData.height=a.height},a.src=this.$getFileURL(t.file)}}),watch:{"formData.path":{immediate:!0,handler:function(t){t||t.trim()||(this.imageIsReady=!1)}}}},y=v,b=(a("49fe"),a("2877")),S=a("c999"),w=Object(b["a"])(y,i,r,!1,null,"ffa332c4",null);"function"===typeof S["default"]&&Object(S["default"])(w);e["default"]=w.exports},"46e8":function(t,e,a){},"49fe":function(t,e,a){"use strict";var i=a("46e8"),r=a.n(i);r.a},"68dc":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"address":"picture address","choose":"choose picture","type":"output type","address-placeholder":"remote picture address","size":"output size","origin":"keep origin size","custom":"custom size","lock":"lock aspect ratio","convert":"convert","output":"output","tip":"right click to download the picture","download":"download","picture-error":"preview failed"},"cn":{"address":"图片地址","choose":"选择图片","type":"输出类型","address-placeholder":"输入图片地址","size":"输出尺寸","origin":"保留原尺寸","custom":"自定义尺寸","lock":"锁定宽高","convert":"转换","output":"输出","tip":"右键下载图片","download":"下载图片","picture-error":"图片预览失败"}}'),delete t.options._Ctor}},c999:function(t,e,a){"use strict";var i=a("68dc"),r=a.n(i);e["default"]=r.a}}]);
//# sourceMappingURL=chunk-a720859c.a8ce1887.js.map