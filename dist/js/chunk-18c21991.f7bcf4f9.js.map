{"version":3,"sources":["webpack:///./src/components/Upload/index.vue?4e66","webpack:///./node_modules/core-js/modules/es.array.some.js","webpack:///./src/components/Upload/index.vue?9eae","webpack:///./src/components/Upload/index.vue?b6f5","webpack:///./src/components/Upload/index.vue?7c38","webpack:///./node_modules/view-design/src/components/upload/upload.vue?066a","webpack:///./node_modules/view-design/src/components/upload/upload-list.vue?4d03","webpack:///./node_modules/view-design/src/components/progress/progress.vue?23a3","webpack:///node_modules/view-design/src/components/progress/progress.vue","webpack:///./node_modules/view-design/src/components/progress/progress.vue?1def","webpack:///./node_modules/view-design/src/components/progress/progress.vue","webpack:///node_modules/view-design/src/components/upload/upload-list.vue","webpack:///./node_modules/view-design/src/components/upload/upload-list.vue?02a9","webpack:///./node_modules/view-design/src/components/upload/upload-list.vue","webpack:///./node_modules/view-design/src/components/upload/ajax.js","webpack:///node_modules/view-design/src/components/upload/upload.vue","webpack:///./node_modules/view-design/src/components/upload/upload.vue?7be8","webpack:///./node_modules/view-design/src/components/upload/upload.vue","webpack:///./node_modules/view-design/src/components/upload/index.js","webpack:///src/components/Upload/index.vue","webpack:///./src/components/Upload/index.vue?05d3","webpack:///./src/components/Upload/index.vue"],"names":["module","exports","Component","options","__i18n","push","_Ctor","$","$some","some","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","target","proto","forced","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","style","attrs","accept","formData","maxSize","format","handleMaxSize","handleFormatError","beforeUpload","uploadSuccess","uploadFail","staticStyle","domProps","_s","$t","sourceType","needPreview","cachedFile","containerStyles","resultStyles","fileUrl","_e","audioInfo","cover","on","downloadCover","staticRenderFns","class","prefixCls","classes","handleClick","$event","preventDefault","onDrop","handlePaste","dragOver","ref","multiple","handleChange","_t","fileList","handleRemove","handlePreview","_l","file","fileCls","_v","name","directives","rawName","value","status","expression","nativeOn","parsePercentage","percentage","showProgress","wrapClasses","outerClasses","innerClasses","bgClasses","percent","successBgClasses","hideInfo","textInside","textClasses","textInnerClasses","statusIcon","component","getError","action","option","xhr","msg","err","Error","method","url","getBody","text","responseText","response","JSON","parse","e","upload","XMLHttpRequest","onprogress","total","loaded","onProgress","FormData","data","Object","keys","map","key","append","filename","onerror","onError","onload","onSuccess","open","withCredentials","headers","item","hasOwnProperty","setRequestHeader","send","props","type","String","default","width","Number","height","Array","Boolean","components","Upload","computed","bgType","$store","state","bg","converterCardStyles","backgroundColor","$lightenOrDarken","isNaN","currentPlugin","currentFileName","watch","immediate","handler","val","methods","event","$emit","path","console","log","message","$Notice","error","title","desc","stopPropagation","$downloadImage"],"mappings":"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","file":"js/chunk-18c21991.f7bcf4f9.js","sourcesContent":["module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"tip\":\"drag or choose file\",\"download-cover\":\"download audio cover\"},\"cn\":{\"tip\":\"拖拽或点击上传\",\"download-cover\":\"下载音频封面\"}}')\n  delete Component.options._Ctor\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $some = require('../internals/array-iteration').some;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('some');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('some');\n\n// `Array.prototype.some` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.some\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","import mod from \"-!../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=custom&index=0&blockType=i18n\"; export default mod; export * from \"-!../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=custom&index=0&blockType=i18n\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3af99dee&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3af99dee&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload-plugin-container\"},[_c('Upload',{style:(_vm.containerStyles),attrs:{\"type\":\"drag\",\"action\":\"/\",\"accept\":_vm.accept,\"max-size\":_vm.formData.maxSize,\"show-upload-list\":false,\"format\":_vm.formData.format,\"on-exceeded-size\":_vm.handleMaxSize,\"on-format-error\":_vm.handleFormatError,\"before-upload\":_vm.beforeUpload,\"on-success\":_vm.uploadSuccess,\"on-error\":_vm.uploadFail}},[_c('div',{staticClass:\"upload-plugin-area\"},[_c('Icon',{attrs:{\"type\":\"ios-cloud-upload\",\"color\":\"#888\",\"size\":\"30\"}}),_c('span',{staticStyle:{\"color\":\"#888\"},domProps:{\"textContent\":_vm._s(_vm.$t('tip'))}}),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.sourceType =='image' && _vm.needPreview && _vm.cachedFile)?_c('div',{staticClass:\"image_previewer\",style:([_vm.containerStyles, _vm.resultStyles])},[_c('img',{attrs:{\"src\":_vm.fileUrl,\"alt\":\"\"}})]):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.sourceType =='audio' && _vm.cachedFile)?_c('div',{staticClass:\"image_previewer\",style:([_vm.containerStyles, _vm.resultStyles])},[_c('img',{attrs:{\"src\":_vm.audioInfo.cover || \"http://static.dei2.com/images/inig/audio_placeholder.jpg\",\"alt\":\"\"}}),(_vm.audioInfo.cover)?_c('div',{staticClass:\"cover_downloader\",on:{\"click\":_vm.downloadCover}},[_c('Tooltip',{staticStyle:{\"wdith\":\"32px\",\"height\":\"32px\"},attrs:{\"content\":_vm.$t('download-cover'),\"placement\":\"bottom\",\"transfer\":true}},[_c('Icon',{staticStyle:{\"margin-top\":\"5px\"},attrs:{\"type\":\"md-download\",\"color\":\"#fff\",\"size\":\"24\"}})],1)],1):_vm._e()]):_vm._e()])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:[_vm.prefixCls]},[_c('div',{class:_vm.classes,on:{\"click\":_vm.handleClick,\"drop\":function($event){$event.preventDefault();return _vm.onDrop($event)},\"paste\":_vm.handlePaste,\"dragover\":function($event){$event.preventDefault();_vm.dragOver = true},\"dragleave\":function($event){$event.preventDefault();_vm.dragOver = false}}},[_c('input',{ref:\"input\",class:[_vm.prefixCls + '-input'],attrs:{\"type\":\"file\",\"multiple\":_vm.multiple,\"accept\":_vm.accept},on:{\"change\":_vm.handleChange}}),_vm._t(\"default\")],2),_vm._t(\"tip\"),(_vm.showUploadList)?_c('upload-list',{attrs:{\"files\":_vm.fileList},on:{\"on-file-remove\":_vm.handleRemove,\"on-file-preview\":_vm.handlePreview}}):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{class:[_vm.prefixCls + '-list']},_vm._l((_vm.files),function(file){return _c('li',{class:_vm.fileCls(file),on:{\"click\":function($event){return _vm.handleClick(file)}}},[_c('span',{on:{\"click\":function($event){return _vm.handlePreview(file)}}},[_c('Icon',{attrs:{\"type\":_vm.format(file)}}),_vm._v(\" \"+_vm._s(file.name)+\" \")],1),_c('Icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(file.status === 'finished'),expression:\"file.status === 'finished'\"}],class:[_vm.prefixCls + '-list-remove'],attrs:{\"type\":\"ios-close\"},nativeOn:{\"click\":function($event){return _vm.handleRemove(file)}}}),_c('transition',{attrs:{\"name\":\"fade\"}},[(file.showProgress)?_c('i-progress',{attrs:{\"stroke-width\":2,\"percent\":_vm.parsePercentage(file.percentage),\"status\":file.status === 'finished' && file.showProgress ? 'success' : 'normal'}}):_vm._e()],1)],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.wrapClasses},[_c('div',{class:_vm.outerClasses},[_c('div',{class:_vm.innerClasses},[_c('div',{class:_vm.bgClasses,style:(_vm.bgStyle)},[(_vm.textInside)?_c('div',{staticClass:\"ivu-progress-inner-text\"},[_vm._v(_vm._s(_vm.percent)+\"%\")]):_vm._e()]),_c('div',{class:_vm.successBgClasses,style:(_vm.successBgStyle)})])]),(!_vm.hideInfo && !_vm.textInside)?_c('span',{class:_vm.textClasses},[_vm._t(\"default\",[(_vm.isStatus)?_c('span',{class:_vm.textInnerClasses},[_c('Icon',{attrs:{\"type\":_vm.statusIcon}})],1):_c('span',{class:_vm.textInnerClasses},[_vm._v(\" \"+_vm._s(_vm.percent)+\"% \")])])],2):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div :class=\"wrapClasses\">\n        <div :class=\"outerClasses\">\n            <div :class=\"innerClasses\">\n                <div :class=\"bgClasses\" :style=\"bgStyle\"><div class=\"ivu-progress-inner-text\" v-if=\"textInside\">{{ percent }}%</div></div><div :class=\"successBgClasses\" :style=\"successBgStyle\"></div>\n            </div>\n        </div>\n        <span v-if=\"!hideInfo && !textInside\" :class=\"textClasses\">\n            <slot>\n                <span v-if=\"isStatus\" :class=\"textInnerClasses\">\n                    <Icon :type=\"statusIcon\"></Icon>\n                </span>\n                <span v-else :class=\"textInnerClasses\">\n                    {{ percent }}%\n                </span>\n            </slot>\n        </span>\n    </div>\n</template>\n<script>\n    import Icon from '../icon';\n    import { oneOf } from '../../utils/assist';\n\n    const prefixCls = 'ivu-progress';\n\n    export default {\n        name: 'Progress',\n        components: { Icon },\n        props: {\n            percent: {\n                type: Number,\n                default: 0\n            },\n            successPercent: {\n                type: Number,\n                default: 0\n            },\n            status: {\n                validator (value) {\n                    return oneOf(value, ['normal', 'active', 'wrong', 'success']);\n                },\n                default: 'normal'\n            },\n            hideInfo: {\n                type: Boolean,\n                default: false\n            },\n            strokeWidth: {\n                type: Number,\n                default: 10\n            },\n            vertical: {\n                type: Boolean,\n                default: false\n            },\n            strokeColor: {\n                type: [String, Array]\n            },\n            textInside: {\n                type: Boolean,\n                default: false\n            }\n        },\n        data () {\n            return {\n                currentStatus: this.status\n            };\n        },\n        computed: {\n            isStatus () {\n                return this.currentStatus == 'wrong' || this.currentStatus == 'success';\n            },\n            statusIcon () {\n                let type = '';\n                switch (this.currentStatus) {\n                    case 'wrong':\n                        type = 'ios-close-circle';\n                        break;\n                    case 'success':\n                        type = 'ios-checkmark-circle';\n                        break;\n                }\n\n                return type;\n            },\n            bgStyle () {\n                const style =  this.vertical ? {\n                    height: `${this.percent}%`,\n                    width: `${this.strokeWidth}px`,\n                } : {\n                    width: `${this.percent}%`,\n                    height: `${this.strokeWidth}px`\n                };\n\n                if (this.strokeColor) {\n                    if (typeof this.strokeColor === 'string') {\n                        style['background-color'] = this.strokeColor;\n                    } else {\n                        style['background-image'] = `linear-gradient(to right, ${this.strokeColor[0]} 0%, ${this.strokeColor[1]} 100%)`;\n                    }\n                }\n\n                return style;\n            },\n            successBgStyle () {\n                return this.vertical ? {\n                    height: `${this.successPercent}%`,\n                    width: `${this.strokeWidth}px`\n                } : {\n                    width: `${this.successPercent}%`,\n                    height: `${this.strokeWidth}px`\n                };\n            },\n            wrapClasses () {\n                return [\n                    `${prefixCls}`,\n                    `${prefixCls}-${this.currentStatus}`,\n                    {\n                        [`${prefixCls}-show-info`]: !this.hideInfo && !this.textInside,\n                        [`${prefixCls}-vertical`]: this.vertical\n\n                    }\n                ];\n            },\n            textClasses () {\n                return `${prefixCls}-text`;\n            },\n            textInnerClasses () {\n                return `${prefixCls}-text-inner`;\n            },\n            outerClasses () {\n                return `${prefixCls}-outer`;\n            },\n            innerClasses () {\n                return `${prefixCls}-inner`;\n            },\n            bgClasses () {\n                return `${prefixCls}-bg`;\n            },\n            successBgClasses () {\n                return `${prefixCls}-success-bg`;\n            }\n        },\n        created () {\n            this.handleStatus();\n        },\n        methods: {\n            handleStatus (isDown) {\n                if (isDown) {\n                    this.currentStatus = 'normal';\n                    this.$emit('on-status-change', 'normal');\n                } else {\n                    if (parseInt(this.percent, 10) == 100) {\n                        this.currentStatus = 'success';\n                        this.$emit('on-status-change', 'success');\n                    }\n                }\n            }\n        },\n        watch: {\n            percent (val, oldVal) {\n                if (val < oldVal) {\n                    this.handleStatus(true);\n                } else {\n                    this.handleStatus();\n                }\n            },\n            status (val) {\n                this.currentStatus = val;\n            }\n        }\n    };\n</script>\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./progress.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./progress.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./progress.vue?vue&type=template&id=42f0d017&\"\nimport script from \"./progress.vue?vue&type=script&lang=js&\"\nexport * from \"./progress.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <ul :class=\"[prefixCls + '-list']\">\n        <li\n            v-for=\"file in files\"\n            :class=\"fileCls(file)\"\n            @click=\"handleClick(file)\">\n            <span @click=\"handlePreview(file)\">\n                <Icon :type=\"format(file)\"></Icon> {{ file.name }}\n            </span>\n            <Icon\n                type=\"ios-close\"\n                :class=\"[prefixCls + '-list-remove']\"\n                v-show=\"file.status === 'finished'\"\n                @click.native=\"handleRemove(file)\"></Icon>\n            <transition name=\"fade\">\n                <i-progress\n                    v-if=\"file.showProgress\"\n                    :stroke-width=\"2\"\n                    :percent=\"parsePercentage(file.percentage)\"\n                    :status=\"file.status === 'finished' && file.showProgress ? 'success' : 'normal'\"></i-progress>\n            </transition>\n        </li>\n    </ul>\n</template>\n<script>\n    import Icon from '../icon/icon.vue';\n    import iProgress from '../progress/progress.vue';\n    const prefixCls = 'ivu-upload';\n\n    export default {\n        name: 'UploadList',\n        components: { Icon, iProgress },\n        props: {\n            files: {\n                type: Array,\n                default() {\n                    return [];\n                }\n            }\n        },\n        data () {\n            return {\n                prefixCls: prefixCls\n            };\n        },\n        methods: {\n            fileCls (file) {\n                return [\n                    `${prefixCls}-list-file`,\n                    {\n                        [`${prefixCls}-list-file-finish`]: file.status === 'finished'\n                    }\n                ];\n            },\n            handleClick (file) {\n                this.$emit('on-file-click', file);\n            },\n            handlePreview (file) {\n                this.$emit('on-file-preview', file);\n            },\n            handleRemove (file) {\n                this.$emit('on-file-remove', file);\n            },\n            format (file) {\n                const format = file.name.split('.').pop().toLocaleLowerCase() || '';\n                let type = 'ios-document-outline';\n\n                if (['gif','jpg','jpeg','png','bmp','webp'].indexOf(format) > -1) {\n                    type = 'ios-image';\n                }\n                if (['mp4','m3u8','rmvb','avi','swf','3gp','mkv','flv'].indexOf(format) > -1) {\n                    type = 'ios-film';\n                }\n                if (['mp3','wav','wma','ogg','aac','flac'].indexOf(format) > -1) {\n                    type = 'ios-musical-notes';\n                }\n                if (['doc','txt','docx','pages','epub','pdf'].indexOf(format) > -1) {\n                    type = 'md-document';\n                }\n                if (['numbers','csv','xls','xlsx'].indexOf(format) > -1) {\n                    type = 'ios-stats';\n                }\n                if (['keynote','ppt','pptx'].indexOf(format) > -1) {\n                    type = 'ios-videocam';\n                }\n\n                return type;\n            },\n            parsePercentage (val) {\n                return parseInt(val, 10);\n            }\n        }\n    };\n</script>","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./upload-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./upload-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./upload-list.vue?vue&type=template&id=d359e11c&\"\nimport script from \"./upload-list.vue?vue&type=script&lang=js&\"\nexport * from \"./upload-list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// https://github.com/ElemeFE/element/blob/dev/packages/upload/src/ajax.js\n\nfunction getError(action, option, xhr) {\n    const msg = `fail to post ${action} ${xhr.status}'`;\n    const err = new Error(msg);\n    err.status = xhr.status;\n    err.method = 'post';\n    err.url = action;\n    return err;\n}\n\nfunction getBody(xhr) {\n    const text = xhr.responseText || xhr.response;\n    if (!text) {\n        return text;\n    }\n\n    try {\n        return JSON.parse(text);\n    } catch (e) {\n        return text;\n    }\n}\n\nexport default function upload(option) {\n    if (typeof XMLHttpRequest === 'undefined') {\n        return;\n    }\n\n    const xhr = new XMLHttpRequest();\n    const action = option.action;\n\n    if (xhr.upload) {\n        xhr.upload.onprogress = function progress(e) {\n            if (e.total > 0) {\n                e.percent = e.loaded / e.total * 100;\n            }\n            option.onProgress(e);\n        };\n    }\n\n    const formData = new FormData();\n\n    if (option.data) {\n        Object.keys(option.data).map(key => {\n            formData.append(key, option.data[key]);\n        });\n    }\n\n    formData.append(option.filename, option.file);\n\n    xhr.onerror = function error(e) {\n        option.onError(e);\n    };\n\n    xhr.onload = function onload() {\n        if (xhr.status < 200 || xhr.status >= 300) {\n            return option.onError(getError(action, option, xhr), getBody(xhr));\n        }\n\n        option.onSuccess(getBody(xhr));\n    };\n\n    xhr.open('post', action, true);\n\n    if (option.withCredentials && 'withCredentials' in xhr) {\n        xhr.withCredentials = true;\n    }\n\n    const headers = option.headers || {};\n\n    // if (headers['X-Requested-With'] !== null) {\n    //   xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    // }\n\n    for (let item in headers) {\n        if (headers.hasOwnProperty(item) && headers[item] !== null) {\n            xhr.setRequestHeader(item, headers[item]);\n        }\n    }\n    xhr.send(formData);\n}\n","<template>\n    <div :class=\"[prefixCls]\">\n        <div\n            :class=\"classes\"\n            @click=\"handleClick\"\n            @drop.prevent=\"onDrop\"\n            @paste=\"handlePaste\"\n            @dragover.prevent=\"dragOver = true\"\n            @dragleave.prevent=\"dragOver = false\">\n            <input\n                ref=\"input\"\n                type=\"file\"\n                :class=\"[prefixCls + '-input']\"\n                @change=\"handleChange\"\n                :multiple=\"multiple\"\n                :accept=\"accept\">\n            <slot></slot>\n        </div>\n        <slot name=\"tip\"></slot>\n        <upload-list\n            v-if=\"showUploadList\"\n            :files=\"fileList\"\n            @on-file-remove=\"handleRemove\"\n            @on-file-preview=\"handlePreview\"></upload-list>\n    </div>\n</template>\n<script>\n    import UploadList from './upload-list.vue';\n    import ajax from './ajax';\n    import { oneOf } from '../../utils/assist';\n    import Emitter from '../../mixins/emitter';\n    import mixinsForm from '../../mixins/form';\n\n    const prefixCls = 'ivu-upload';\n\n    export default {\n        name: 'Upload',\n        mixins: [ Emitter, mixinsForm ],\n        components: { UploadList },\n        props: {\n            action: {\n                type: String,\n                required: true\n            },\n            headers: {\n                type: Object,\n                default () {\n                    return {};\n                }\n            },\n            multiple: {\n                type: Boolean,\n                default: false\n            },\n            data: {\n                type: Object\n            },\n            name: {\n                type: String,\n                default: 'file'\n            },\n            withCredentials: {\n                type: Boolean,\n                default: false\n            },\n            showUploadList: {\n                type: Boolean,\n                default: true\n            },\n            type: {\n                type: String,\n                validator (value) {\n                    return oneOf(value, ['select', 'drag']);\n                },\n                default: 'select'\n            },\n            format: {\n                type: Array,\n                default () {\n                    return [];\n                }\n            },\n            accept: {\n                type: String\n            },\n            maxSize: {\n                type: Number\n            },\n            beforeUpload: Function,\n            onProgress: {\n                type: Function,\n                default () {\n                    return {};\n                }\n            },\n            onSuccess: {\n                type: Function,\n                default () {\n                    return {};\n                }\n            },\n            onError: {\n                type: Function,\n                default () {\n                    return {};\n                }\n            },\n            onRemove: {\n                type: Function,\n                default () {\n                    return {};\n                }\n            },\n            onPreview: {\n                type: Function,\n                default () {\n                    return {};\n                }\n            },\n            onExceededSize: {\n                type: Function,\n                default () {\n                    return {};\n                }\n            },\n            onFormatError: {\n                type: Function,\n                default () {\n                    return {};\n                }\n            },\n            defaultFileList: {\n                type: Array,\n                default() {\n                    return [];\n                }\n            },\n            paste: {\n                type: Boolean,\n                default: false\n            },\n            disabled: {\n                type: Boolean,\n                default: false\n            }\n        },\n        data () {\n            return {\n                prefixCls: prefixCls,\n                dragOver: false,\n                fileList: [],\n                tempIndex: 1\n            };\n        },\n        computed: {\n            classes () {\n                return [\n                    `${prefixCls}`,\n                    {\n                        [`${prefixCls}-select`]: this.type === 'select',\n                        [`${prefixCls}-drag`]: this.type === 'drag',\n                        [`${prefixCls}-dragOver`]: this.type === 'drag' && this.dragOver\n                    }\n                ];\n            },\n\n        },\n        methods: {\n            handleClick () {\n                if (this.itemDisabled) return;\n                this.$refs.input.click();\n            },\n            handleChange (e) {\n                const files = e.target.files;\n\n                if (!files) {\n                    return;\n                }\n                this.uploadFiles(files);\n                this.$refs.input.value = null;\n            },\n            onDrop (e) {\n                this.dragOver = false;\n                if (this.itemDisabled) return;\n                this.uploadFiles(e.dataTransfer.files);\n            },\n            handlePaste (e) {\n                if (this.itemDisabled) return;\n                if (this.paste) {\n                    this.uploadFiles(e.clipboardData.files);\n                }\n            },\n            uploadFiles (files) {\n                let postFiles = Array.prototype.slice.call(files);\n                if (!this.multiple) postFiles = postFiles.slice(0, 1);\n\n                if (postFiles.length === 0) return;\n\n                postFiles.forEach(file => {\n                    this.upload(file);\n                });\n            },\n            upload (file) {\n                if (!this.beforeUpload) {\n                    return this.post(file);\n                }\n\n                const before = this.beforeUpload(file);\n                if (before && before.then) {\n                    before.then(processedFile => {\n                        if (Object.prototype.toString.call(processedFile) === '[object File]') {\n                            this.post(processedFile);\n                        } else {\n                            this.post(file);\n                        }\n                    }, () => {\n                        // this.$emit('cancel', file);\n                    });\n                } else if (before !== false) {\n                    this.post(file);\n                } else {\n                    // this.$emit('cancel', file);\n                }\n            },\n            post (file) {\n                // check format\n                if (this.format.length) {\n                    const _file_format = file.name.split('.').pop().toLocaleLowerCase();\n                    const checked = this.format.some(item => item.toLocaleLowerCase() === _file_format);\n                    if (!checked) {\n                        this.onFormatError(file, this.fileList);\n                        return false;\n                    }\n                }\n\n                // check maxSize\n                if (this.maxSize) {\n                    if (file.size > this.maxSize * 1024) {\n                        this.onExceededSize(file, this.fileList);\n                        return false;\n                    }\n                }\n\n                this.handleStart(file);\n                let formData = new FormData();\n                formData.append(this.name, file);\n\n                ajax({\n                    headers: this.headers,\n                    withCredentials: this.withCredentials,\n                    file: file,\n                    data: this.data,\n                    filename: this.name,\n                    action: this.action,\n                    onProgress: e => {\n                        this.handleProgress(e, file);\n                    },\n                    onSuccess: res => {\n                        this.handleSuccess(res, file);\n                    },\n                    onError: (err, response) => {\n                        this.handleError(err, response, file);\n                    }\n                });\n            },\n            handleStart (file) {\n                file.uid = Date.now() + this.tempIndex++;\n                const _file = {\n                    status: 'uploading',\n                    name: file.name,\n                    size: file.size,\n                    percentage: 0,\n                    uid: file.uid,\n                    showProgress: true\n                };\n\n                this.fileList.push(_file);\n            },\n            getFile (file) {\n                const fileList = this.fileList;\n                let target;\n                fileList.every(item => {\n                    target = file.uid === item.uid ? item : null;\n                    return !target;\n                });\n                return target;\n            },\n            handleProgress (e, file) {\n                const _file = this.getFile(file);\n                this.onProgress(e, _file, this.fileList);\n                _file.percentage = e.percent || 0;\n            },\n            handleSuccess (res, file) {\n                const _file = this.getFile(file);\n\n                if (_file) {\n                    _file.status = 'finished';\n                    _file.response = res;\n\n                    this.onSuccess(res, _file, this.fileList);\n                    this.dispatch('FormItem', 'on-form-change', _file);\n\n                    setTimeout(() => {\n                        _file.showProgress = false;\n                    }, 1000);\n                }\n            },\n            handleError (err, response, file) {\n                const _file = this.getFile(file);\n                const fileList = this.fileList;\n\n                _file.status = 'fail';\n\n                fileList.splice(fileList.indexOf(_file), 1);\n\n                this.onError(err, response, file);\n            },\n            handleRemove(file) {\n                const fileList = this.fileList;\n                fileList.splice(fileList.indexOf(file), 1);\n                this.onRemove(file, fileList);\n            },\n            handlePreview(file) {\n                if (file.status === 'finished') {\n                    this.onPreview(file);\n                }\n            },\n            clearFiles() {\n                this.fileList = [];\n            }\n        },\n        watch: {\n            defaultFileList: {\n                immediate: true,\n                handler(fileList) {\n                    this.fileList = fileList.map(item => {\n                        item.status = 'finished';\n                        item.percentage = 100;\n                        item.uid = Date.now() + this.tempIndex++;\n                        return item;\n                    });\n                }\n            }\n        },\n    };\n</script>\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./upload.vue?vue&type=template&id=21fa85f2&\"\nimport script from \"./upload.vue?vue&type=script&lang=js&\"\nexport * from \"./upload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Upload from './upload.vue';\n\nexport default Upload;","<i18n>\n{\n  \"en\": {\n    \"tip\": \"drag or choose file\",\n    \"download-cover\": \"download audio cover\"\n  },\n  \"cn\": {\n    \"tip\": \"拖拽或点击上传\",\n    \"download-cover\": \"下载音频封面\"\n  }\n}\n</i18n>\n<template>\n  <div class=\"upload-plugin-container\">\n    <Upload type=\"drag\"\n            action=\"/\"\n            :accept=\"accept\"\n            :max-size=\"formData.maxSize\"\n            :show-upload-list=\"false\"\n            :format=\"formData.format\"\n            :on-exceeded-size=\"handleMaxSize\"\n            :on-format-error=\"handleFormatError\"\n            :before-upload=\"beforeUpload\"\n            :on-success=\"uploadSuccess\"\n            :on-error=\"uploadFail\"\n            :style=\"containerStyles\">\n      <div class=\"upload-plugin-area\">\n        <Icon type=\"ios-cloud-upload\"\n              color=\"#888\"\n              size=\"30\"></Icon>\n        <span style=\"color: #888;\"\n              v-text=\"$t('tip')\"></span>\n        <transition name=\"fade\">\n          <div class=\"image_previewer\"\n               :style=\"[containerStyles, resultStyles]\"\n               v-if=\"sourceType =='image' && needPreview && cachedFile\">\n            <img :src=\"fileUrl\"\n                 alt=\"\">\n          </div>\n        </transition>\n        <transition name=\"fade\">\n          <div class=\"image_previewer\"\n               :style=\"[containerStyles, resultStyles]\"\n               v-if=\"sourceType =='audio' && cachedFile\">\n            <img :src=\"audioInfo.cover || `http://static.dei2.com/images/inig/audio_placeholder.jpg`\"\n                 alt=\"\">\n\n            <div @click=\"downloadCover\"\n                 v-if=\"audioInfo.cover\"\n                 class=\"cover_downloader\">\n              <Tooltip :content=\"$t('download-cover')\"\n                       placement=\"bottom\"\n                       :transfer=\"true\"\n                       style=\"wdith: 32px; height: 32px;\">\n                <Icon type=\"md-download\"\n                      color=\"#fff\"\n                      style=\"margin-top: 5px;\"\n                      size=\"24\" />\n              </Tooltip>\n            </div>\n          </div>\n        </transition>\n      </div>\n    </Upload>\n  </div>\n</template>\n<style lang=\"less\" scoped>\n.ml10 {\n  margin-left: 10px;\n}\n\n.image_previewer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n  img {\n    max-width: 100%;\n    max-height: 100%;\n    border-radius: 5px;\n  }\n}\n.cover_downloader {\n  position: absolute;\n  right: 8px;\n  top: 8px;\n  width: 32px;\n  height: 32px;\n  pointer-events: auto;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.2);\n  border-radius: 4px;\n}\n</style>\n<script>\nimport { createNamespacedHelpers } from 'vuex'\nconst { mapActions } = createNamespacedHelpers('../../../store/modules')\nimport { Upload, Icon, Tooltip } from 'view-design'\nexport default {\n  name: 'UploadPlugin',\n  props: {\n    sourceType: { // 媒体类型，image/audio/video\n      type: String,\n      default: 'image'\n    },\n    width: {\n      type: [String, Number],\n      default: '200px'\n    },\n    height: {\n      type: [String, Number],\n      default: '200px'\n    },\n    accept: {\n      type: String,\n      default: ''\n    },\n    format: {\n      type: Array,\n      default () {\n        return []\n      }\n    },\n    needPreview: {\n      type: Boolean,\n      default: false\n    },\n    cover: {\n      type: String,\n      default: ''\n    }\n  },\n  components: {\n    Upload, Icon, Tooltip\n  },\n  computed: {\n    bgType () {\n      return this.$store.state.bgType\n    },\n    bg () {\n      return this.$store.state.bg\n    },\n    converterCardStyles () {\n      if (this.bgType != 'image' && this.bg) {\n        return {\n          backgroundColor: this.$lightenOrDarken(this.bg, -10)\n        }\n      } else {\n        return {\n          backgroundColor: '#fff'\n        }\n      }\n    },\n    resultStyles () {\n      if (this.bgType != 'image' && this.bg) {\n        return {\n          backgroundColor: this.$lightenOrDarken(this.bg, -20)\n        }\n      } else {\n        return {\n          backgroundColor: '#fff'\n        }\n      }\n    },\n    containerStyles () {\n      return {\n        width: isNaN(this.width) ? this.width : (this.width + 'px'),\n        height: isNaN(this.height) ? this.height : (this.height + 'px')\n      }\n    }\n  },\n  data () {\n    return {\n      formData: {\n        maxSize: 200 * 1024,\n        format: ['jpg', 'png', 'jpeg', 'gif']\n      },\n      currentPlugin: '',\n      currentFileName: '',\n      cachedFile: null,\n      fileUrl: '',\n      audioInfo: {}\n    }\n  },\n  watch: {\n    format: {\n      immediate: true,\n      handler (val) {\n        this.formData.format = val\n      }\n    }\n  },\n  methods: {\n    ...mapActions([\n      'moduleConverter'\n    ]),\n    async beforeUpload (file) {\n      this.cachedFile = file\n      if (this.sourceType === 'image') {\n        this.fileUrl = this.$getFileURL(file)\n        this.$emit('change', {\n          sourceType: this.sourceType,\n          file: this.cachedFile\n        })\n      } else if (this.sourceType === 'audio') {\n        let response = await this.$store.dispatch('moduleConverter/getAudioInfoFromLocal', {\n          accept: \"mp3;wav;flac;ogg;aac;m4a;wma;au;aiff;opus;amr\",\n          file: file\n        })\n        if (response && response.status == 200 && response.data && response.data.status == 200 && response.data.data) {\n          this.audioInfo = response.data.data\n        } else {\n          this.audioInfo = {\n            status: 1001,\n            message: '失败',\n            data: null\n          }\n        }\n        this.$emit('change', {\n          sourceType: this.sourceType,\n          info: this.audioInfo,\n          file: file\n        })\n      }\n      return false\n    },\n    uploadSuccess (event, file, fileList) {\n      if (event.status !== 200) {\n        // this.$Message.destroy()\n        // this.$Message.error(event.message)\n      } else {\n        this.$emit('success', {\n          filename: file.name,\n          path: event.data.path,\n          file: this.cachedFile\n        })\n      }\n    },\n    uploadFail (event, file, fileList) {\n      console.log('uploadFail', event.message)\n      this.$emit('fail', {\n        filename: file.name,\n        message: event.message\n      })\n    },\n    handleMaxSize (file) {\n      console.log('文件不能超过' + (this.formData.maxSize / 1024) + 'M')\n      this.$emit('fail', {\n        filename: file.name,\n        message: '文件不能超过' + (this.formData.maxSize / 1024) + 'M'\n      })\n    },\n    handleFormatError (file) {\n      // console.log('请上传' + (this.formData.format.join(';')) + '格式的文件')\n      // this.$emit('fail', {\n      //   filename: file.name,\n      //   message: '请上传' + (this.formData.format.join(';')) + '格式的文件'\n      // })\n      this.$Notice.error({\n        title: '格式错误',\n        desc: '请上传' + (this.formData.format.join('; ')) + '格式的文件'\n      })\n    },\n    downloadCover (e) {\n      e.stopPropagation()\n      this.$downloadImage(this.audioInfo.cover)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3af99dee&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3af99dee&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3af99dee\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./index.vue?vue&type=custom&index=0&blockType=i18n\"\nif (typeof block0 === 'function') block0(component)\n\nexport default component.exports"],"sourceRoot":""}